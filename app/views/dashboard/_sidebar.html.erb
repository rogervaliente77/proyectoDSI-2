<ul class="navbar-nav sidebar sidebar-dark accordion" id="accordionSidebar" style="background-color: #2C3E50;">

  <!-- Sidebar - Brand -->
  <% if @current_user.role.name.in?(["super_admin", "admin", "cajero"]) %>
    <a class="sidebar-brand d-flex align-items-center justify-content-center py-3" href="<%= admin_home_path %>" data-turbo="false">
      <div class="sidebar-brand-icon d-flex align-items-center justify-content-center" 
           style="width: 70px; height: 70px; background-color: #FFFFFF; border-radius: 50%; padding: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.2);">
        <img src="https://i.ibb.co/B2QsNGLm/20250913-1732-Logo-Herramientas-Ferre-Pro-remix-01k52pmwf5ewavwk0cjb9g6k1z-1.png"
             alt="Logo" class="img-fluid" style="max-width: 100%; max-height: 100%; object-fit: contain;">
      </div>
      <div class="sidebar-brand-text mx-2 text-white" style="font-size: 0.9rem;">Admin</div>
    </a>
  <% else %>
    <a class="sidebar-brand d-flex align-items-center justify-content-center py-3" href="<%= portal_home_path %>" data-turbo="false">
      <div class="sidebar-brand-icon d-flex align-items-center justify-content-center" 
           style="width: 70px; height: 70px; background-color: #FFFFFF; border-radius: 50%; padding: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.2);">
        <img src="https://i.ibb.co/B2QsNGLm/20250913-1732-Logo-Herramientas-Ferre-Pro-remix-01k52pmwf5ewavwk0cjb9g6k1z-1.png"
             alt="Logo" class="img-fluid" style="max-width: 100%; max-height: 100%; object-fit: contain;">
      </div>
      <div class="sidebar-brand-text mx-2 text-white" style="font-size: 0.9rem;">Portal de cliente</div>
    </a>
  <% end %>

  <hr class="sidebar-divider my-0">

  <!-- Nav Item - Dashboard -->
  <li class="nav-item active">
    <% if @current_user.role.name.in?(["super_admin", "admin", "cajero"]) %>
      <%= link_to admin_home_path, data: { turbo: false }, class: "nav-link" do %>
        <i class="fas fa-fw fa-tachometer-alt"></i>
        <span>Dashboard</span>
      <% end %>
    <% else %>
      <%= link_to portal_home_path, data: { turbo: false }, class: "nav-link" do %>
        <i class="fas fa-fw fa-tachometer-alt"></i>
        <span>Dashboard</span>
      <% end %>
    <% end %>
  </li>

  <hr class="sidebar-divider">

  <div class="sidebar-heading text-light">Interface</div>

  <!-- Settings -->
  <li class="nav-item">
    <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseTwo"
       aria-expanded="true" aria-controls="collapseTwo">
      <i class="fas fa-fw fa-cog"></i>
      <span>Settings</span>
    </a>
    <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionSidebar">
      <div class="bg-white py-2 collapse-inner rounded">
        <h6 class="collapse-header">Custom Components:</h6>
        <% if @current_user.role.name.in?(["super_admin", "admin", "cajero"]) %>
          <a class="collapse-item" href="<%= admin_users_edit_password_path(id: @current_user.id) %>" data-turbo="false">Cambiar contraseña</a>
        <% else %>
          <a class="collapse-item" href="<%= portal_users_edit_password_path(id: @current_user.id) %>" data-turbo="false">Cambiar contraseña</a>
        <% end %>
      </div>
    </div>
  </li>

  <% if @current_user.role.name.in?(["super_admin", "admin"]) %>
    <!-- Productos -->
    <li class="nav-item">
      <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseProductos"
        aria-expanded="true" aria-controls="collapseProductos">
        <i class="fas fa-fw fa-folder"></i>
        <span>Productos</span>
      </a>
      <div id="collapseProductos" class="collapse" aria-labelledby="headingProductos" data-parent="#accordionSidebar">
        <div class="bg-white py-2 collapse-inner rounded">
          <h6 class="collapse-header">Productos:</h6>
          <a class="collapse-item" href="<%= admin_productos_path %>" data-turbo="false">Productos</a>
          <a class="collapse-item" href="<%= admin_productos_new_path %>" data-turbo="false">Crear nuevo producto</a>
          <a class="collapse-item" href="<%= admin_categories_path %>" data-turbo="false">Categorias</a>
          <a class="collapse-item" href="<%= admin_inventory_admin_products_path %>" data-turbo="false">Inventario</a>
          <a class="collapse-item" href="<%= admin_product_histories_path %>" data-turbo="false">Movimientos de Inventario</a>
        </div>
      </div>
    </li>

    <!-- Marcas -->
    <li class="nav-item">
      <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseMarcas"
         aria-expanded="true" aria-controls="collapseMarcas">
        <i class="fas fa-tags"></i>
        <span>Marcas</span>
      </a>
      <div id="collapseMarcas" class="collapse" aria-labelledby="headingMarcas" data-parent="#accordionSidebar">
        <div class="bg-white py-2 collapse-inner rounded">
          <h6 class="collapse-header">Gestión de Marcas:</h6>
          <a class="collapse-item" href="<%= admin_marcas_path %>" data-turbo="false">Ver Marcas</a>
          <a class="collapse-item" href="<%= new_admin_marca_path %>" data-turbo="false">Crear Nueva Marca</a>
        </div>
      </div>
    </li>
  <% end %>

  <!-- Users (solo super_admin) -->
  <% if @current_user.role.name == "super_admin" %>
    <li class="nav-item">
      <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseUsers"
         aria-expanded="true" aria-controls="collapseUsers">
        <i class="fas fa-users"></i>
        <span>Users</span>
      </a>
      <div id="collapseUsers" class="collapse" aria-labelledby="headingUsers" data-parent="#accordionSidebar">
        <div class="bg-white py-2 collapse-inner rounded">
          <h6 class="collapse-header">Usuarios:</h6>
          <a class="collapse-item" href="<%= admin_users_path %>" data-turbo="false">Usuarios</a>
          <a class="collapse-item" href="<%= new_admin_user_path %>" data-turbo="false">Crear nuevo usuario</a>
          <a class="collapse-item" href="<%= admin_roles_path %>" data-turbo="false">Roles</a>                
        </div>
      </div>
    </li>
  <% end %>

  <!-- Cajas y Cajeros -->
  <% if @current_user.role.name.in?(["super_admin", "admin"]) %>
    <li class="nav-item">
      <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseCajas"
         aria-expanded="true" aria-controls="collapseCajas">
        <i class="fas fa-store"></i>
        <span>Cajas</span>
      </a>
      <div id="collapseCajas" class="collapse" aria-labelledby="headingCajas" data-parent="#accordionSidebar">
        <div class="bg-white py-2 collapse-inner rounded">
          <h6 class="collapse-header">Cajas:</h6>
          <a class="collapse-item" href="<%= admin_cajas_path %>" data-turbo="false">Cajas</a>
          <a class="collapse-item" href="<%= admin_cajas_new_path %>" data-turbo="false">Crear nueva caja</a>
        </div>
      </div>
    </li>

    <li class="nav-item">
      <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseCajeros"
         aria-expanded="true" aria-controls="collapseCajeros">
        <i class="fas fa-store"></i>
        <span>Cajeros</span>
      </a>
      <div id="collapseCajeros" class="collapse" aria-labelledby="headingCajeros" data-parent="#accordionSidebar">
        <div class="bg-white py-2 collapse-inner rounded">
          <h6 class="collapse-header">Cajeros:</h6>
          <a class="collapse-item" href="<%= admin_cajeros_path %>" data-turbo="false">Cajeros</a>
          <a class="collapse-item" href="<%= admin_cajeros_new_path %>" data-turbo="false">Crear nuevo cajero</a>
        </div>
      </div>
    </li>
  <% end %>

  <!-- Ventas -->
  <% if @current_user.role.name.in?(["super_admin", "admin", "cajero"]) %>
    <li class="nav-item">
      <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseSales"
         aria-expanded="true" aria-controls="collapseSales">
        <i class="fas fa-store"></i>
        <span>Ventas</span>
      </a>
      <div id="collapseSales" class="collapse" aria-labelledby="headingSales" data-parent="#accordionSidebar">
        <div class="bg-white py-2 collapse-inner rounded">
          <h6 class="collapse-header">Ventas:</h6>
          <a class="collapse-item" href="<%= admin_sales_path %>" data-turbo="false">Ventas</a>
          <a class="collapse-item" href="<%= admin_sales_new_path %>" data-turbo="false">Crear nueva venta</a>
        </div>
      </div>
    </li>
  <% end %>

  <!-- Devoluciones -->
  <% if @current_user.role.name.in?(["super_admin", "admin", "cajero"]) %>
    <li class="nav-item">
      <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseDevoluciones"
         aria-expanded="true" aria-controls="collapseDevoluciones">
        <i class="fas fa-undo-alt"></i>
        <span>Devoluciones</span>
      </a>
      <div id="collapseDevoluciones" class="collapse" aria-labelledby="headingDevoluciones" data-parent="#accordionSidebar">
        <div class="bg-white py-2 collapse-inner rounded">
          <h6 class="collapse-header">Gestión de Devoluciones:</h6>
          <a class="collapse-item" href="<%= admin_devoluciones_path %>" data-turbo="false">Ver Devoluciones</a>
          <a class="collapse-item" href="<%= new_admin_devolucione_path %>" data-turbo="false">Crear Nueva Devolución</a>
          <a class="collapse-item" href="<%= admin_admin_returned_products_path %>" data-turbo="false">Productos devueltos</a>
        </div>
      </div>
    </li>
  <% end %>

  <hr class="sidebar-divider d-none d-md-block">

  <div class="text-center d-none d-md-inline">
    <button class="rounded-circle border-0" id="sidebarToggle"></button>
  </div>

</ul>
